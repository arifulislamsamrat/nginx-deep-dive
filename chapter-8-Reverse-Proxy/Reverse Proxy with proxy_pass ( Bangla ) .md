# Reverse Proxy with proxy_pass ( Bangla )

এই ভিডিওতে, আমরা পূর্ববর্তী ভিডিওতে সেটআপ করা Node.js অ্যাপ্লিকেশনগুলির সাথে কাজ করতে থাকবো এবং কিভাবে এই সার্ভারগুলিতে প্রক্সি করতে পারি তা দেখবো। এটি একটি ফটো অ্যাপ্লিকেশন, এবং আমরা এটিকে [photos.example.com](http://photos.example.com/) সাবডোমেইন ব্যবহার করে সেটআপ করবো। আজকের মূল মডিউল হবে http_proxy_module। এর সাথে দুইটি সঙ্গী মডিউল, fastcgi এবং uwsgi, রয়েছে যেগুলি একই রকমের নির্দেশনাসমূহ তৈরি করে।

আমরা যখন রিভার্স প্রক্সি প্রথমে আলোচনা করেছিলাম, তখন উল্লেখ করেছিলাম যে আপনি ট্রাফিক লোড ব্যালেন্সিং এবং ক্যাশিংয়ের জন্য সেগুলি ব্যবহার করতে পারেন।

আমাদের NGINX সার্ভিস:

- Static কন্টেন্ট সরবরাহ করবে  NGINX  কারণ সেটি অত্যন্ত কার্যকরভাবে করতে পারে।
- নির্দিষ্ট অনুরোধগুলি অ্যাপ্লিকেশনগুলিতে রুট করবে যাতে তারা ডায়নামিক তথ্য তৈরি করতে পারে।

### প্রাথমিক প্রক্সি সার্ভার সেটআপ

প্রথম ধাপ হবে একটি ফাইল তৈরি করা `/etc/nginx/conf.d` ডিরেক্টরির ভিতরে, `photos.example.com.conf` নামে। এই ফাইলটি আমাদের স্ট্যান্ডার্ড সার্ভার ব্লক ব্যবহার করবে যা পোর্ট ৮০ এ শুনবে। SSL এর সাথে এটি সেটআপ করা সম্ভব, কিন্তু আমরা মূল বৈশিষ্ট্যগুলো দেখানোর জন্য এটিকে সহজ রাখবো।

সার্ভার নাম হবে `photos.example.com` এবং আমাদের লোকেশন ব্লক সেটআপ করা হবে।

### প্রক্সি পাস সেটআপ

আমাদের Node.js অ্যাপ্লিকেশন ৩০০০ পোর্টে চলবে। তাই আমরা একটি `proxy_pass` নির্দেশনা সেট করবো যা 127.0.0.1:3000 URL এ রুট করবে। তবে কিছু অতিরিক্ত নির্দেশনা দরকার যা NGINX কে ক্লায়েন্টের IP ঠিকানা জানাতে এবং অন্যান্য হেডারগুলি ম্যানিপুলেট করতে সাহায্য করবে।

### কিছু অতিরিক্ত হেডার সেট করা

- `proxy_http_version 1.1`
- `proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for`
- `proxy_set_header X-Real-IP $remote_addr`
- WebSockets এর জন্য `proxy_set_header Upgrade $http_upgrade`
- `proxy_set_header Connection "upgrade"`

### NGINX রিলোড করা এবং পরীক্ষা করা

NGINX রিলোড করে ব্রাউজারে [photos.example.com](http://photos.example.com/) পরীক্ষা করা হবে। এটি সফল হলে, আমরা আমাদের কনফিগারেশন সেটআপ সম্পূর্ণ করতে পারি।

### SELinux পারমিশন ইস্যু সমাধান

SELinux এর পারমিশন ইস্যুগুলি সমাধানের জন্য `setsebool -P httpd_can_network_connect 1` কমান্ড ব্যবহার করা হবে।

### স্থির কন্টেন্টের জন্য আলাদা লোকেশন ব্লক

আমরা NGINX ব্যবহার করে স্থির কন্টেন্ট সরবরাহ করবো। `/var/www/photos.example.com` এ একটি লোকেশন ব্লক সেটআপ করা হবে যা আমাদের অ্যাপ্লিকেশনের স্ট্যাটিক ফাইলগুলি সরবরাহ করবে।

### বড় ফাইল আপলোডের জন্য ক্লায়েন্ট ম্যাক্স বডি সাইজ কনফিগারেশন

আমরা `client_max_body_size` নির্দেশনা ব্যবহার করে বড় ফাইল আপলোড করতে পারি।