# Cleaning Up URLs ( Bangla )

এই পাঠে, আমরা NGINX-এর সাথে রিরাইট নিয়মগুলি ব্যবহার করার পদ্ধতি অন্বেষণ করব। রিরাইট নিয়মগুলি আমাদের আগত URL-গুলি পরিবর্তন করতে দেয়, হয় তাদের একটি পছন্দের ফরম্যাটে পরিবর্তন ও পুনঃনির্দেশনা করার মাধ্যমে, অথবা লোকেশন ব্লকগুলির জন্য হস্তান্তর করার আগে তাদের পরিবর্তন করার মাধ্যমে।

আমরা URL থেকে **`.html`** ফাইল এক্সটেনশন সরিয়ে ফেলব, একই কন্টেন্ট সার্ভ করার সময়। এটি প্রায়শই ভ্যানিটি URL-এর জন্য করা হয়, যা পরিষ্কার দেখায় এবং আন্ডারলাইনিং ইন্সট্রাকচারের বিস্তারিত লুকিয়ে রাখে।

### **ধাপসমূহ:**

1. **রিরাইট নিয়মগুলি বোঝা:**
    - রিরাইট নিয়মগুলি সার্ভার বা লোকেশন ব্লকের ভিতরে ব্যবহার করা হয়।
    - তারা নিয়মিত এক্সপ্রেশনের উপর নির্ভর করে প্যাটার্ন এবং ক্যাপচার গ্রুপগুলি সংজ্ঞায়িত করতে।
    - ক্যাপচার করা গ্রুপগুলি প্রতিস্থাপন স্ট্রিংয়ে **`$1`**, **`$2`** ইত্যাদি ব্যবহার করে উল্লেখ করা যেতে পারে।
2. **নিয়মিত এক্সপ্রেশনের বেসিক:**
    - আমরা **`^`** ব্যবহার করি স্ট্রিংয়ের শুরুতে নির্দেশ করতে।
    - ব্র্যাকেট **`()`** ক্যাপচার গ্রুপ তৈরি করে।
    - **`.*`** শূন্য বা আরও অনেক ক্যারেক্টার মেলে।
    - **`\\.`** ডট ক্যারেক্টারটি পালাতে একটি লিটারাল পিরিয়ড মেলানোর জন্য।
    - **`?`** পূর্ববর্তী উপাদানটিকে ঐচ্ছিক করে।
    - **`$`** স্ট্রিংয়ের শেষ নির্দেশ করে।
3. **রিরাইট নিয়ম তৈরি:**
    - আমরা রিরাইট নিয়মগুলি **`conf.d/default.conf`** ফাইলে যোগ করি, আমাদের SSL সার্টিফিকেটগুলির ঠিক পরে।
    - প্রথম রিরাইট নিয়মটি URL থেকে **`.html`** সরিয়ে ফেলে এবং একটি 302 স্ট্যাটাস কোড ব্যবহার করে পুনঃনির্দেশনা করে:
        
        ```bash
        rewrite ^/(.*)\\.html(\\?.*)?$ /$1$2 redirect
        ```
        
    - দ্বিতীয় রিরাইট নিয়মটি শেষের স্ল্যাশ সহ URL-গুলি পরিচালনা করে:
        
        ```bash
        rewrite ^/(.*)/$ /$1 redirect;
        ```
        
4. **কনফিগারেশন পরীক্ষা করা:**
    - পরিবর্তনগুলি সংরক্ষণ করুন এবং **`nginx -t`** দিয়ে কনফিগারেশন পরীক্ষা করুন।
    - **`systemctl reload nginx`** দিয়ে NGINX পুনরায় লোড করুন।
5. **সম্ভাব্য রিডিরেক্ট লুপগুলি ঠিক করা**
    - রিডিরেক্ট লুপের সম্মুখীন হলে, নিশ্চিত করুন যে একটি লোকেশন ব্লক রয়েছে যা ফলস্বরূপ URL-গুলি পরিচালনা করবে।
6. **`try_files` ডিরেক্টিভ ব্যবহার করা:**
    - এই ডিরেক্টিভটি নির্দিষ্ট ফাইলগুলির অস্তিত্ব পরীক্ষা করে এবং URL পরিবর্তন না করে কন্টেন্ট সার্ভ করে।
    - রিরাইটের পরে রিকোয়েস্টগুলি পরিচালনা করতে একটি লোকেশন ব্লক যোগ করুন:
        
        ```bash
        location / {
          try_files $uri $uri/ $uri.html =404;
        }
        ```
        

### **উদাহরণ কনফিগারেশন:**

1. **`conf.d/default.conf`** খুলুন এবং রিরাইট নিয়মগুলি যোগ করুন:
    
    ```bash
    rewrite ^/(.*)\\.html(\\?.*)?$ /$1$2 redirect;
    rewrite ^/(.*)/$ /$1 redirect;
    ```
    
2. **`try_files`** ডিরেক্টিভটি লোকেশন ব্লকের ভিতরে যোগ করুন:
    
    ```bash
    location / {
      try_files $uri $uri/ $uri.html =404;
    }
    ```
    
3. NGINX পরীক্ষা এবং পুনরায় লোড করুন:
    
    ```bash
    nginx -t
    systemctl reload nginx
    ```
    
4. আপনার সার্ভারের URL অ্যাক্সেস করে যাচাই করুন। **`.html`** সহ URL-গুলি এখন এক্সটেনশন ছাড়াই থাকবে এবং সঠিক কন্টেন্ট সার্ভ করবে।

এই ধাপগুলি অনুসরণ করে, আপনি NGINX-এ URL রিরাইটিং সফলভাবে বাস্তবায়ন করতে পারবেন, পরিষ্কার এবং আরও ব্যবহারকারী-বান্ধব URL তৈরি করতে পারবেন, একই ফাংশনালিটি বজায় রেখে।